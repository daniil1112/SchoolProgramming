(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1294:function(e,t,r){var content=r(1347);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(7).default)("2e6bd8af",content,!0,{sourceMap:!1})},1346:function(e,t,r){"use strict";var n=r(1294);r.n(n).a},1347:function(e,t,r){(t=r(6)(!1)).push([e.i,".group-item[data-v-fd996986]{border:1px solid #000;border-radius:7px;margin:10px 5px;background-color:#f0f8ff}",""]),e.exports=t},1411:function(e,t,r){"use strict";r.r(t);r(8);var n,o=r(3),l={name:"deleteGroupConfirm",props:["show"]},c=r(2),d={name:"Group",components:{DeleteGroupConfirm:Object(c.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("mdb-container",[r("mdb-modal",{staticClass:"text-center",attrs:{show:e.show,size:"sm",danger:""},on:{close:function(t){return e.$emit("close")}}},[r("mdb-modal-header",{attrs:{center:"",close:!1}},[r("p",{staticClass:"heading"},[e._v("Вы уверены?")])]),e._v(" "),r("mdb-modal-body",[r("mdb-icon",{staticClass:"animated rotateIn",attrs:{icon:"times",size:"4x"}}),e._v(" "),r("p",[r("span",[e._v("Группа и её ученики будут удалены безвозвратно.")])])],1),e._v(" "),r("mdb-modal-footer",{attrs:{center:""}},[r("mdb-btn",{attrs:{outline:"success"},on:{click:function(t){return e.$emit("confirm")}}},[e._v("Да")]),e._v(" "),r("mdb-btn",{attrs:{color:"danger"},on:{click:function(t){return e.$emit("close")}}},[e._v("Отменить")])],1)],1)],1)}),[],!1,null,"ca7a2e48",null).exports},props:["group"],data:function(){return{showDeleteModal:!1}},methods:{deleteGroup:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("teacher/group/delete",e.group._id);case 2:if(r=t.sent,n=r.error,o=r.errorMessage,n){t.next=8;break}return e.showDeleteModal=!1,t.abrupt("return",e.$notify.success({title:"Успех",message:"Группа и ученики успешно удалены"}));case 8:return t.abrupt("return",e.$notify.error({title:"Ошибка",message:o}));case 9:case"end":return t.stop()}}),t)})))()}}},m=(r(1346),Object(c.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("mdb-row",{staticClass:"group-item justify-content-end"},[r("delete-group-confirm",{attrs:{show:e.showDeleteModal},on:{close:function(t){e.showDeleteModal=!1},confirm:e.deleteGroup}}),e._v(" "),r("mdb-col",{attrs:{col:"5"}},[r("span",{domProps:{innerHTML:e._s(e.group.name)}})]),e._v(" "),r("mdb-col",{attrs:{col:"4"}},[e.group.form?r("mdb-badge",{attrs:{color:"purple",tag:"a"}},[e._v(e._s(e.group.form)+" класс")]):e._e()],1),e._v(" "),r("mdb-col",{attrs:{col:"2"}},[r("mdb-dropdown",[r("mdb-dropdown-toggle",{attrs:{slot:"toggle",color:"primary"},slot:"toggle"},[e._v("Действия")]),e._v(" "),r("mdb-dropdown-menu",{attrs:{color:"primary"}},[r("mdb-dropdown-item",{on:{click:function(t){return e.$router.push("/teacherinterface/groups/"+e.group._id+"/tasks")}}},[e._v("Задания")]),e._v(" "),r("mdb-dropdown-item",{on:{click:function(t){return e.$router.push("/teacherinterface/groups/"+e.group._id+"/users")}}},[e._v("Список учеников")]),e._v(" "),r("mdb-dropdown-item",{on:{click:function(t){e.showDeleteModal=!0}}},[e._v("Удалить группу")])],1)],1)],1)],1)}),[],!1,null,"fd996986",null).exports),v=(r(55),r(13),{name:"groupAddModal",props:["show"],data:function(){return{name:"",form:null,validate:{name:0},selectFormOptions:[{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"4",value:"4"},{text:"5",value:"5"},{text:"6",value:"6"},{text:"7",value:"7"},{text:"8",value:"8"},{text:"9",value:"9"},{text:"10",value:"10"},{text:"11",value:"11"}],loading:!1}},computed:{invalidFeedbackName:function(){return 1===this.validate.name?"":2===this.validate.name?"Введите логин":3===this.validate.name?"Слишком короткий логин":4===this.validate.name?"Слишком длинный логин":void 0}},watch:{selectFormOptions:function(){var e=this.selectFormOptions.find((function(e){return e.selected}));return this.form=e?e.value:null}},methods:{validateName:function(){var e=this.name;0===e.length?this.validate.name=2:e.length<3?this.validate.name=3:e.length>=50?this.validate.name=4:this.validate.name=1},setDefault:function(){this.name="",this.form=null,this.validate.name=0,this.selectFormOptions=[{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"4",value:"4"},{text:"5",value:"5"},{text:"6",value:"6"},{text:"7",value:"7"},{text:"8",value:"8"},{text:"9",value:"9"},{text:"10",value:"10"},{text:"11",value:"11"}]},addGroup:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,form,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.validateName(),r=e.name,form=e.form,1===e.validate.name){t.next=4;break}return t.abrupt("return",e.$notify.error({title:"Ошибка",message:"Проверьте введенные данные"}));case 4:return t.next=6,e.$store.dispatch("teacher/group/add",{name:r,form:form});case 6:if(n=t.sent,o=n.error,l=n.errorMessage,!o){t.next=11;break}return t.abrupt("return",e.$notify.error({title:"Ошибка при добавлении",message:l}));case 11:return e.setDefault(),e.$emit("hide"),t.abrupt("return",e.$notify.success({title:"Успех",message:"Группа добавлена"}));case 14:case"end":return t.stop()}}),t)})))()}}}),f={layout:"teacher",middleware:"authTeacher",name:"All",components:{GroupAddModal:Object(c.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("mdb-container",[r("mdb-modal",{attrs:{show:e.show,centered:""},on:{close:function(t){return e.$emit("hide")}}},[r("mdb-modal-header",{staticClass:"text-center"},[r("mdb-modal-title",{staticClass:"w-100",attrs:{tag:"h4",bold:""}},[e._v("Новая группа")])],1),e._v(" "),r("mdb-modal-body",{staticClass:"mx-3 grey-text"},[r("mdb-input",{staticClass:"mb-5",attrs:{label:"Название группы",icon:"address-book",type:"text",required:"",isValid:1===e.validate.name,customValidation:e.validate.name>0,invalidFeedback:e.invalidFeedbackName},on:{change:e.validateName},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),e._v(" "),r("mdb-select",{attrs:{icon:"users",placeholder:"Выберите класс",label:"Класс"},model:{value:e.selectFormOptions,callback:function(t){e.selectFormOptions=t},expression:"selectFormOptions"}})],1),e._v(" "),r("mdb-modal-footer",{attrs:{center:""}},[r("mdb-btn",{attrs:{gradient:"green",block:"",rounded:""},nativeOn:{click:function(t){return e.addGroup(t)}}},[e._v("Добавить")])],1)],1)],1)}),[],!1,null,"75c6244a",null).exports,Group:m},data:function(){return{addGroupModal:!1,loading:!0}},computed:{groups:function(){return this.$store.getters["teacher/group/groups"]},counter:function(){return this.$store.getters["teacher/group/groupsCounter"]}},mounted:(n=Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("teacher/group/loadCounter");case 2:return e.next=4,this.$store.dispatch("teacher/group/loadGroups");case 4:this.loading=!1;case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),head:{title:"Список всех групп"}},h=Object(c.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("mdb-container",[r("group-add-modal",{attrs:{show:e.addGroupModal},on:{hide:function(t){e.addGroupModal=!1}}}),e._v(" "),r("mdb-card",[r("mdb-card-body",[r("mdb-card-title",{staticClass:"text-center pb-0",attrs:{cascade:""}},[r("span",[e._v("Список групп")]),e._v(" "),e.loading?e._e():r("mdb-btn",{staticClass:"btn-fb",attrs:{tag:"a",size:"lg",floating:"",icon:"plus"},on:{click:function(t){e.addGroupModal=!0}}}),e._v(" "),r("hr")],1),e._v(" "),r("mdb-list-group",[e.loading?r("mdb-container",[r("div",{staticClass:"ph-item"},[r("div",{staticClass:"ph-col-12"},[r("div",{staticClass:"ph-picture"})])])]):r("mdb-list-group-item",{attrs:{color:"secondary"}},[e.groups.length>0?r("mdb-row",[r("mdb-col",{attrs:{md:"12"}},e._l(e.groups,(function(e){return r("Group",{attrs:{group:e}})})),1)],1):r("mdb-row",[e._v("\n            Группы не найдены. "),r("a",{attrs:{href:"#"},on:{click:function(t){e.addGroupModal=!0}}},[e._v("Добавить")])])],1)],1)],1)],1)],1)}),[],!1,null,"2848daa5",null);t.default=h.exports}}]);