(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1410:function(e,t,r){"use strict";r.r(t);r(8);var n=r(3),o={name:"AddTests",data:function(){return{form:{title:null,start:null,end:null,options:{checkDelay:!1}},pickerOptionsStart:{shortcuts:[{text:"Now",onClick:function(e){e.$emit("pick",new Date)}}]},pickerOptionsEnd:{shortcuts:[{text:"Now",onClick:function(e){e.$emit("pick",new Date)}},{text:"Tomorrow",onClick:function(e){var t=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",t)}}]},rules:{title:[{required:!0,message:"Введите название",trigger:"blur"},{min:2,message:"Название должно быть не короче 2 символов",trigger:"blur"},{max:50,message:"Название должно быть не длиннее 50 символов",trigger:"blur"}],start:[{required:!0,message:"ВВедите время начала выполнения",trigger:"blur"}],end:[{required:!0,message:"ВВедите время начала окончания",trigger:"blur"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate((function(e){e?t.$emit("addtest",{title:t.form.title,start:parseInt(new Date(t.form.start.toISOString()).getTime()/1e3),end:parseInt(new Date(t.form.end.toISOString()).getTime()/1e3),options:t.form.options}):t.$notify.error({title:"Ошибка при создании",message:"Заполните все поля!"})}))}}},l=r(2),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"formAdd",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[r("el-form-item",{attrs:{label:"Заголовок",prop:"title"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Время открытия",prop:"start"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"Select date and time","picker-options":e.pickerOptionsStart},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Время завершения",prop:"end"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"Select date and time","picker-options":e.pickerOptionsEnd},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}},[e._v("\n        >\n      ")])],1),e._v(" "),r("el-form-item",[r("el-switch",{attrs:{"active-text":"Проверка при закрытии","inactive-text":"Проверять сразу"},model:{value:e.form.options.checkDelay,callback:function(t){e.$set(e.form.options,"checkDelay",t)},expression:"form.options.checkDelay"}})],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){return e.save("formAdd")}}},[e._v("\n        Сохранить\n      ")])],1)],1)],1)}),[],!1,null,"6dc40f56",null).exports,m={name:"AddProgramming",data:function(){return{form:{title:null,start:null,end:null,options:{onlyOneSuccessAttemp:!1,visibleTests:!1,visibleCompilerAnswer:!0,visibleTestsTable:!0}},pickerOptionsStart:{shortcuts:[{text:"Now",onClick:function(e){e.$emit("pick",new Date)}}]},pickerOptionsEnd:{shortcuts:[{text:"Now",onClick:function(e){e.$emit("pick",new Date)}},{text:"Tomorrow",onClick:function(e){var t=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",t)}}]},rules:{title:[{required:!0,message:"Введите название",trigger:"blur"},{min:2,message:"Название должно быть не короче 2 символов",trigger:"blur"},{max:50,message:"Название должно быть не длиннее 50 символов",trigger:"blur"}],start:[{required:!0,message:"Введите время начала выполнения",trigger:"blur"}],end:[{required:!0,message:"Введите время начала окончания",trigger:"blur"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate((function(e){e?t.$emit("addprogramming",{title:t.form.title,start:parseInt(new Date(t.form.start.toISOString()).getTime()/1e3),end:parseInt(new Date(t.form.end.toISOString()).getTime()/1e3),options:t.form.options}):t.$notify.error({title:"Ошибка при создании",message:"Заполните все поля!"})}))},visibleTableChange:function(){this.form.options.visibleTestsTable?(this.form.options.visibleTests=!1,this.form.options.visibleCompilerAnswer=!0):(this.form.options.visibleTests=!1,this.form.options.visibleCompilerAnswer=!1)}}},d=Object(l.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"formAdd",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[r("el-form-item",{attrs:{label:"Заголовок",prop:"title"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Время открытия",prop:"start"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"Select date and time","picker-options":e.pickerOptionsStart},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Время завершения",prop:"end"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"Select date and time","picker-options":e.pickerOptionsEnd},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}})],1),e._v(" "),r("el-form-item",[r("el-switch",{attrs:{"active-text":"Запрет доработки после решения","inactive-text":"Разрешение доработки после решения"},model:{value:e.form.options.onlyOneSuccessAttemp,callback:function(t){e.$set(e.form.options,"onlyOneSuccessAttemp",t)},expression:"form.options.onlyOneSuccessAttemp"}})],1),e._v(" "),r("el-form-item",[r("el-switch",{attrs:{"active-text":"Показывать таблицу с тестами","inactive-text":"Не показывать"},on:{change:e.visibleTableChange},model:{value:e.form.options.visibleTestsTable,callback:function(t){e.$set(e.form.options,"visibleTestsTable",t)},expression:"form.options.visibleTestsTable"}})],1),e._v(" "),r("el-form-item",[r("el-switch",{attrs:{"active-text":"Показывать ответ компилятора на каждый тест","inactive-text":"Не показывать",disabled:!e.form.options.visibleTestsTable},model:{value:e.form.options.visibleCompilerAnswer,callback:function(t){e.$set(e.form.options,"visibleCompilerAnswer",t)},expression:"form.options.visibleCompilerAnswer"}})],1),e._v(" "),r("el-form-item",[r("el-switch",{attrs:{"active-text":"Показывать вход/выход теста","inactive-text":"Не показывать вход/выход теста",disabled:!e.form.options.visibleTestsTable},model:{value:e.form.options.visibleTests,callback:function(t){e.$set(e.form.options,"visibleTests",t)},expression:"form.options.visibleTests"}})],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){return e.save("formAdd")}}},[e._v("\n        Сохранить\n      ")])],1)],1)],1)}),[],!1,null,"262d26ee",null).exports,f={name:"AddMaterial",data:function(){return{form:{title:null,start:null,end:null,options:{checkDelay:!1,visibleTests:!1,visibleCompilerAnswer:!0}},pickerOptionsStart:{shortcuts:[{text:"Now",onClick:function(e){e.$emit("pick",new Date)}}]},pickerOptionsEnd:{shortcuts:[{text:"Now",onClick:function(e){e.$emit("pick",new Date)}},{text:"Tomorrow",onClick:function(e){var t=new Date;t.setTime(t.getTime()+864e5),e.$emit("pick",t)}}]},rules:{title:[{required:!0,message:"Введите название",trigger:"blur"},{min:2,message:"Название должно быть не короче 2 символов",trigger:"blur"},{max:50,message:"Название должно быть не длиннее 50 символов",trigger:"blur"}],start:[{required:!0,message:"Введите время начала выполнения",trigger:"blur"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate((function(e){e?t.$emit("addmaterial",{title:t.form.title,start:parseInt(new Date(t.form.start.toISOString()).getTime()/1e3),end:9999999999,options:t.form.options}):t.$notify.error({title:"Ошибка при создании",message:"Заполните все поля!"})}))}}},v={name:"AddTask",middleware:"authTeacher",layout:"teacher",components:{AddMaterial:Object(l.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{ref:"formAdd",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[r("el-form-item",{attrs:{label:"Заголовок",prop:"title"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Время открытия",prop:"start"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"Select date and time","picker-options":e.pickerOptionsStart},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}})],1),e._v(" "),r("el-form-item",[r("el-button",{on:{click:function(t){return e.save("formAdd")}}},[e._v("\n        Сохранить\n      ")])],1)],1)],1)}),[],!1,null,"4b339d7b",null).exports,AddProgramming:d,AddTests:c},data:function(){return{loading:!0,materials:null,tasks:null,blocks:null,selected:null,search:null,filterSelect:1,filter:[{value:1,label:"Все"},{value:2,label:"Тесты"},{value:3,label:"Програмирование"},{value:4,label:"Материалы"}],form:{title:null,start:null,end:null}}},computed:{tableData:function(){var e=this;return this.selected?this.materials.concat(this.tasks,this.blocks).filter((function(t){return t._id===e.selected._id})):1===this.filterSelect?this.materials.concat(this.tasks,this.blocks):2===this.filterSelect?this.blocks:3===this.filterSelect?this.tasks:this.materials}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadAllTasks();case 2:e.loading=!1;case 3:case"end":return t.stop()}}),t)})))()},methods:{loadAllTasks:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("/api/teacher/lessons/loadMaterialBlockProgramming");case 2:(r=t.sent).data.materials&&(e.materials=r.data.materials),r.data.tasks&&(e.tasks=r.data.tasks),r.data.blocks&&(e.blocks=r.data.blocks);case 6:case"end":return t.stop()}}),t)})))()},type:function(e){var t=e.row;return this.materials.some((function(element){return element._id===t._id}))?"Материалы":this.tasks.some((function(element){return element._id===t._id}))?"Програмирование":this.blocks.some((function(element){return element._id===t._id}))?"Тесты":void 0},getTypeColor:function(e){var t=e.row;return this.materials.some((function(element){return element._id===t._id}))?"":this.tasks.some((function(element){return element._id===t._id}))?"success":this.blocks.some((function(element){return element._id===t._id}))?"warning":void 0},select:function(e){var t=e.row;this.selected=t},deleteSelected:function(){this.selected=null},saveTestInGroup:function(data){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("/api/teacher/lessons/addTaskToGroup",{group:e.$route.params.group,type:1,task:e.selected._id,title:data.title,start:data.start,end:data.end,options:data.options});case 2:(r=t.sent).data.success?e.$notify.success({title:"Успех",message:"Тесты добавлены к группе"}):e.$notify.error({title:"Ошибка!",message:"Что-то пошло не так"}),console.log(r);case 5:case"end":return t.stop()}}),t)})))()},saveProgrammingInGroup:function(data){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("/api/teacher/lessons/addTaskToGroup",{group:e.$route.params.group,type:2,task:e.selected._id,title:data.title,start:data.start,end:data.end,options:data.options});case 2:(r=t.sent).data.success?e.$notify.success({title:"Успех",message:"Задание по програмированию добавлено к группе"}):e.$notify.error({title:"Ошибка!",message:"Что-то пошло не так"}),console.log(r);case 5:case"end":return t.stop()}}),t)})))()},saveMaterialInGroup:function(data){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("/api/teacher/lessons/addTaskToGroup",{group:e.$route.params.group,type:3,task:e.selected._id,title:data.title,start:data.start,end:data.end,options:data.options});case 2:(r=t.sent).data.success?e.$notify.success({title:"Успех",message:"Материал добавлен к группе"}):e.$notify.error({title:"Ошибка!",message:"Что-то пошло не так"}),console.log(r);case 5:case"end":return t.stop()}}),t)})))()}}},k=Object(l.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("mdb-card",[r("mdb-card-title",[e.loading?r("div",{staticClass:"ph-item"},[r("div",{staticClass:"ph-col-12"},[r("div",{staticClass:"ph-row"},[r("div",{staticClass:"ph-col-12 big"})]),e._v(" "),r("div",{staticClass:"ph-picture"})])]):r("mdb-container",[e.materials||e.tasks||e.blocks?r("el-table",{attrs:{data:e.tableData}},[r("el-table-column",{attrs:{prop:"_id",label:"ID"}}),e._v(" "),r("el-table-column",{attrs:{prop:"title",label:"Название"}}),e._v(" "),r("el-table-column",{scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-select",{attrs:{disabled:null!==e.selected,placeholder:"Отобразить"},model:{value:e.filterSelect,callback:function(t){e.filterSelect=t},expression:"filterSelect"}},e._l(e.filter,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}},{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:e.getTypeColor(t)}},[e._v("\n                "+e._s(e.type(t))+"\n              ")])]}}],null,!1,3400360142)}),e._v(" "),r("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[e.selected?r("el-button",{on:{click:e.deleteSelected}},[e._v("\n                Отменить\n              ")]):r("el-button",{on:{click:function(r){return e.select(t)}}},[e._v("\n                Выбрать\n              ")])]}}],null,!1,1962924008)})],1):e._e()],1)],1),e._v(" "),r("mdb-card-body",[e.selected&&e.blocks.some((function(t){return t._id===e.selected._id}))?r("add-tests",{on:{addtest:e.saveTestInGroup}}):e._e(),e._v(" "),e.selected&&e.tasks.some((function(t){return t._id===e.selected._id}))?r("add-programming",{on:{addprogramming:e.saveProgrammingInGroup}}):e._e(),e._v(" "),e.selected&&e.materials.some((function(t){return t._id===e.selected._id}))?r("add-material",{on:{addmaterial:e.saveMaterialInGroup}}):e._e()],1)],1)],1)}),[],!1,null,"69e27450",null);t.default=k.exports}}]);