(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1296:function(t,e,n){var content=n(1351);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(7).default)("5df75219",content,!0,{sourceMap:!1})},1350:function(t,e,n){"use strict";var r=n(1296);n.n(r).a},1351:function(t,e,n){(e=n(6)(!1)).push([t.i,".font-size-12[data-v-8a1ab136]{font-size:12px}",""]),t.exports=e},1413:function(t,e,n){"use strict";n.r(e);n(8);var r=n(3),l={name:"TitleAndTask",props:["data"],data:function(){return{title:"",task:"",validate:{title:0,task:0}}},computed:{invalidFeedbackTitle:function(){return 2===this.validate.title?"Введите название задачи":3===this.validate.title?"Название задачи слишком короткое":4===this.validate.title?"Название задачи слишком длинное":void 0},invalidFeedbackTask:function(){return 2===this.validate.task?"Введите текст задачи":3===this.validate.task?"Текст задачи слишком короткий":4===this.validate.task?"Текст задачи слишком длинный":void 0}},mounted:function(){var t=this.data,title=t.title,e=t.task;this.title=title,this.task=e,this.title.length>0&&this.validateTitle(),this.task.length>0&&this.validateTask()},methods:{validateTitle:function(){var title=this.title.trim();return this.$emit("title",title),0===title.length?this.validate.title=2:title.length<3?this.validate.title=3:title.length>70?this.validate.title=4:this.validate.title=1},validateTask:function(){var t=this.task.trim();return this.$emit("task",t),0===t.length?this.validate.task=2:t.length<10?this.validate.task=3:t.length>500?this.validate.task=4:this.validate.task=1}}},o=n(2),c=Object(o.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("mdb-input",{staticClass:"mb-5",attrs:{label:"Заголовок",icon:"pen",type:"text",required:"",isValid:1===t.validate.title,customValidation:t.validate.title>0,invalidFeedback:t.invalidFeedbackTitle,trim:"",counter:"",counterMaxValue:"70"},on:{change:t.validateTitle},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),n("mdb-input",{staticClass:"mb-5",attrs:{label:"Задание",icon:"edit",type:"textarea",required:"",isValid:1===t.validate.task,customValidation:t.validate.task>0,invalidFeedback:t.invalidFeedbackTask,trim:"",counter:"",counterMaxValue:"500"},on:{change:t.validateTask},model:{value:t.task,callback:function(e){t.task=e},expression:"task"}})],1)}),[],!1,null,"d04bf962",null).exports,d={name:"Examples",data:function(){return{currentInput:"",currentOutput:"",examples:[],modal:!1}},watch:{examples:function(){this.$emit("examples",this.examples)}},methods:{addExample:function(){var t=this;return 0===this.currentInput.length?this.$notify.error({title:"Ошибка",message:"Ввод не может быть пустым"}):0===this.currentOutput.length?this.$notify.error({title:"Ошибка",message:"Вывод не может быть пустым"}):this.examples.some((function(e){return e.input===t.currentInput}))?this.$notify.error({title:"Ошибка",message:"Дублирующийся ввод"}):(this.examples.push({input:this.currentInput,output:this.currentOutput}),this.currentInput="",void(this.currentOutput=""))}}},m=(n(1350),{name:"Add",layout:"teacher",middleware:"authTeacher",components:{Examples:Object(o.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("mdb-btn",{attrs:{tag:"a",gradient:"green",floating:"",size:"lg"},on:{click:function(e){t.modal=!0}}},[n("mdb-icon",{attrs:{icon:"plus"}})],1),t._v(" "),n("mdb-container",[n("mdb-modal",{attrs:{show:t.modal},on:{close:function(e){t.modal=!1}}},[n("mdb-modal-header",{attrs:{center:""}},[t._v("Добавление примера")]),t._v(" "),n("mdb-modal-body",[n("mdb-row",[n("mdb-col",{attrs:{sm:"6"}},[n("mdb-input",{attrs:{type:"textarea",label:"Входные параметры"},on:{change:function(e){return t.currentInput.trim()}},model:{value:t.currentInput,callback:function(e){t.currentInput=e},expression:"currentInput"}})],1),t._v(" "),n("mdb-col",{attrs:{sm:"6"}},[n("mdb-input",{attrs:{type:"textarea",label:"Выходные параметры"},on:{change:function(e){return t.currentOutput.trim()}},model:{value:t.currentOutput,callback:function(e){t.currentOutput=e},expression:"currentOutput"}})],1)],1),t._v(" "),n("mdb-modal-footer",{attrs:{center:""}},[n("mdb-btn",{attrs:{gradient:"blue",rounded:""},on:{click:t.addExample}},[t._v("Добавить")])],1)],1)],1)],1),t._v(" "),n("mdb-container",[n("mdb-container",[t.examples.length>0?n("mdb-tbl",{attrs:{striped:""}},[n("mdb-tbl-head",[n("tr",[n("th",[t._v("#")]),t._v(" "),n("th",[t._v("Пример ввода")]),t._v(" "),n("th",[t._v("Пример вывода")]),t._v(" "),n("th")])]),t._v(" "),n("mdb-tbl-body",t._l(t.examples,(function(e,r){return n("tr",[n("th",[t._v(t._s(r+1))]),t._v(" "),n("td",[t._v(t._s(e.input))]),t._v(" "),n("td",[t._v(t._s(e.output))]),t._v(" "),n("td",[n("mdb-btn",{attrs:{tag:"a",gradient:"blue",floating:"",size:"sm"},on:{click:function(e){return t.examples.splice(r,1)}}},[n("mdb-icon",{attrs:{icon:"trash-alt"}})],1)],1)])})),0)],1):t._e()],1)],1)],1)}),[],!1,null,"8a1ab136",null).exports,TitleAndTask:c},data:function(){return{step:1,firstStep:{title:"",task:""},secondStep:{examples:[]},steps:[{icon:"folder",far:!0,name:"Заголовок и задание"},{icon:"pencil-alt",name:"Примеры ввода/вывода"}],validatedSteps:{},options:{stepBtn:{color:"info",active:"amber",iconClass:"white-text"},nextBtn:{outline:"info",icon:"chevron-right",text:"К следующему шагу"},prevBtn:{outline:"info",icon:"chevron-left",text:"К предыдущему шагу"},submitBtn:{color:"amber",icon:"check",text:"Создать"},lineColor:"amber"}}},methods:{setTitle:function(data){this.firstStep.title=data},setTask:function(data){this.firstStep.task=data},setExamples:function(data){this.secondStep.examples=data},toSecondStep:function(data){this.firstStep={title:data.title,task:data.task},this.step=2},saveFirstStage:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,code;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("api/teacher/programming/newTask",{title:t.firstStep.title,task:t.firstStep.task,examples:t.secondStep.examples});case 2:if(n=e.sent.data,r=n.id,!(code=n.code)){e.next=18;break}e.t0=code,e.next=1===e.t0?9:2===e.t0?12:15;break;case 9:return t.$notify.error({title:"Ошибка при создании",message:"Ошибка в заголовке или задании!"}),t.step=1,e.abrupt("break",16);case 12:return t.$notify.error({title:"Ошибка при создании",message:"Ошибка в примерах ввода\\вывода!"}),t.step=2,e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:e.next=19;break;case 18:r&&(t.$notify.success({title:"Успех",message:"Задание создано!"}),t.$router.push("/teacherinterface/materials/programming/".concat(r,"/view")));case 19:case"end":return e.stop()}}),e)})))()},validate:function(t){this.validatedSteps[t]=1===t?this.firstStep.title.length>=3&&this.firstStep.task.length>=10:this.secondStep.examples.length>0}}}),h=Object(o.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mdb-card",[n("mdb-card-body",[n("mdb-stepper",{attrs:{buttons:"",steps:t.steps,options:t.options,validation:"",validatedSteps:t.validatedSteps},on:{submit:t.saveFirstStage,validate:t.validate},scopedSlots:t._u([{key:"1",fn:function(){return[n("mdb-card-title",{staticClass:"text-center",attrs:{tag:"h3"}},[t._v("Заголовок и задание")]),t._v(" "),n("TitleAndTask",{attrs:{data:t.firstStep},on:{"next-stage":t.toSecondStep,title:t.setTitle,task:t.setTask}})]},proxy:!0},{key:"2",fn:function(){return[n("mdb-card-title",{staticClass:"text-center",attrs:{tag:"h3"}},[t._v("Примеры ввода/вывода")]),t._v(" "),n("Examples",{attrs:{data:t.secondStep},on:{"next-stage":t.saveFirstStage,examples:t.setExamples}})]},proxy:!0}])})],1)],1)}),[],!1,null,"f17a4514",null);e.default=h.exports}}]);