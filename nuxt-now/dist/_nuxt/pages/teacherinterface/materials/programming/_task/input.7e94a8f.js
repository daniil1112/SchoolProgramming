(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1286:function(t,e,r){"use strict";var n={name:"AttempsTable",props:{attemps:{type:Array,default:[]},page:{type:String,default:""},visibleButton:{type:Boolean,default:!0},visibleErrorTest:{type:Boolean,default:!0},visibleVerdict:{type:Boolean,default:!0}},data:function(){return{visibleAttemps:!1}},methods:{tableRowClassName:function(t){var e=t.row;return"waiting"===e.status||"compiling"===e.status?"waiting-row":e.verdict?e.verdict.compilation&&0!==e.verdict.maxPoints&&e.verdict.maxPoints===e.verdict.points?"success-row":"error-row":void 0},statusBar:function(t){var e=t.row;return"waiting"===e.status?"el-icon-document-copy":"compiling"===e.status?"el-icon-loading":e.verdict.compilation?0===e.verdict.maxPoints||e.verdict.maxPoints!==e.verdict.points?"el-icon-remove-outline":"el-icon-circle-check":"el-icon-circle-close"},toVerdict:function(t){var e=t.row;"cc"===this.page?this.$router.push("/teacherinterface/materials/programming/verdict/".concat(e._id)):this.$router.push("/")},togglevisibleAttemps:function(){this.visibleAttemps=!this.visibleAttemps}}},o=r(2),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.visibleButton?r("b-input-group",[t.visibleAttemps?r("b-button",{attrs:{variant:"primary"},on:{click:t.togglevisibleAttemps}},[r("b-icon-arrow-up"),t._v("Скрыть попытки")],1):r("b-button",{attrs:{variant:"primary"},on:{click:t.togglevisibleAttemps}},[r("b-icon-arrow-down"),t._v("Показать попытки ")],1)],1):t._e(),t._v(" "),r("el-table",{directives:[{name:"show",rawName:"v-show",value:t.attemps&&(t.visibleAttemps||!t.visibleButton)&&t.attemps!==[]&&t.attemps!=={},expression:"attemps && (visibleAttemps || !visibleButton ) && attemps !== [] && attemps !== {}"}],attrs:{data:t.attemps,"default-sort":{prop:"_id",order:"descending"},"row-class-name":t.tableRowClassName}},[r("el-table-column",{attrs:{prop:"_id",label:"Id"}}),t._v(" "),r("el-table-column",{attrs:{label:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("i",{staticClass:"font-size-30 icon-status",class:t.statusBar(e)})]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"programLang"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.programLang?r("span",[t._v("PascalABCNet")]):2===e.row.programLang?r("span",[t._v("Python 3")]):t._e()]}}])}),t._v(" "),t.visibleErrorTest?r("el-table-column",{attrs:{label:"ErrorTest"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.verdict?[e.row.verdict.errors?r("span",{domProps:{innerHTML:t._s(e.row.verdict.firstErrorTest)}}):r("span",[t._v("-")])]:void 0}}],null,!0)}):t._e(),t._v(" "),r("el-table-column",{attrs:{label:"CompilerVerdict"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.verdict?[e.row.verdict.errors?r("span",{domProps:{innerHTML:t._s(e.row.verdict.firstErrorType)}}):e.row.verdict.compilation?0===e.row.verdict.maxPoints?r("span",[t._v("UE")]):r("span",[t._v("OK")]):r("span",[t._v("CE")])]:void 0}}],null,!0)}),t._v(" "),t.visibleVerdict?r("el-table-column",{attrs:{label:"verdict"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.verdict?[e.row.verdict?r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.toVerdict(e)}}},[r("i",{staticClass:"el-icon-s-order icon-status font-size-30"})]):t._e()]:void 0}}],null,!0)}):t._e()],1)],1)}),[],!1,null,"48aae4fc",null);e.a=component.exports},1287:function(t,e,r){"use strict";r(757);var n=r(763),o=r.n(n),c=(r(758),r(752),r(753),r(764),{name:"InputProgram",components:{PrismEditor:o.a},props:["compiling","langs","code","lang"],data:function(){return{ProgramLang:1,program:this.code}},mounted:function(){this.lang&&(this.ProgramLang=this.lang)},computed:{prismLang:function(){return 1===this.ProgramLang?"pascal":2===this.ProgramLang?"python":"pascal"},programLangSelect:function(){return this.langs?this.langs:[{_id:1,label:"PascalABCNet"},{_id:2,label:"Python 3"}]}},methods:{exportProgram:function(){this.$emit("export-program",{program:this.$refs.prismEditorRef.codeData,programLang:this.ProgramLang})}}}),l=r(2),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[r("span",[t._v("Язык програмирования")]),t._v(" "),r("el-select",{attrs:{placeholder:"Programming language"},model:{value:t.ProgramLang,callback:function(e){t.ProgramLang=e},expression:"ProgramLang"}},t._l(t.programLangSelect,(function(e){return r("el-option",{key:e.value,attrs:{disabled:t.compiling,label:e.label,value:e._id}})})),1)],1),t._v(" "),r("client-only",[r("prism-editor",{ref:"prismEditorRef",attrs:{language:t.prismLang,"line-numbers":!0,placeholder:"Программа",autosize:"",readonly:t.compiling},model:{value:t.program,callback:function(e){t.program=e},expression:"program"}})],1),t._v(" "),r("b-button-group",[r("mdb-btn",{attrs:{color:"primary",disabled:t.compiling},on:{click:t.exportProgram}},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.compiling,expression:"compiling"}],staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}),t._v("\n      Создать программу\n    ")]),t._v(" "),t._t("buttons")],2)],1)}),[],!1,null,"14b89fc8",null);e.a=component.exports},1330:function(t,e,r){var content=r(1381);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(7).default)("21840aa4",content,!0,{sourceMap:!1})},1380:function(t,e,r){"use strict";var n=r(1330);r.n(n).a},1381:function(t,e,r){(e=r(6)(!1)).push([t.i,".icon-status[data-v-37c8eb0b]{font-size:30px}",""]),t.exports=e},1414:function(t,e,r){"use strict";r.r(e);r(8);var n=r(3),o=(r(757),r(763)),c=r.n(o),l=(r(758),r(752),r(753),r(764),r(1286)),m=r(1287),d={name:"Input",components:{PrismEditor:c.a,AttempsTable:l.a,InputProgram:m.a},data:function(){return{type:"teacher",autoInput:!1,countTests:1,programLang:1,input:[],programLangSelect:[{value:1,label:"PascalABCNet"},{value:2,label:"Python 3"}],code:"",compiling:!0,attemps:null}},computed:{prismLang:function(){return 1===this.programLang?"pascal":2===this.programLang?"python":void 0},task:function(){return this.$store.getters["programming/task/task"]},inputLength:function(){return!!(this.task.input&&this.task.input.length>0)}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadAttemps();case 2:return e.next=4,t.loadTask();case 4:case"end":return e.stop()}}),e)})))()},methods:{addInput:function(){this.input.push("")},deleteInput:function(t){this.input.splice(t,1)},compileInputProgram:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.$axios.post("api/teacher/programming/loadInput",{taskId:e.$route.params.task,program:t.program,programLang:t.programLang,input:e.countTests,type:"auto"});case 2:r.sent,e.compiling=!0,setTimeout(e.loadAttemps,5e3);case 5:case"end":return r.stop()}}),r)})))()},pushInput:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.input.length>0)){e.next=6;break}return e.next=3,t.$axios.post("api/teacher/programming/addInput",{taskId:t.$route.params.task,input:t.input});case 3:return e.sent.data.input,e.next=6,t.loadTask();case 6:case"end":return e.stop()}}),e)})))()},loadAttemps:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.post("api/teacher/programming/loadAttempsInput",{taskId:t.$route.params.task});case 2:if(r=e.sent,n=r.data.attemps.some((function(element){return"waiting"===element.status||"compiling"===element.status})),t.compiling=n,!n){e.next=9;break}setTimeout(t.loadAttemps,5e3),e.next=12;break;case 9:if(!t.task){e.next=12;break}return e.next=12,t.loadTask();case 12:r.data.attemps&&(t.attemps=r.data.attemps);case 13:case"end":return e.stop()}}),e)})))()},loadTask:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("programming/task/loadTask",{taskId:t.$route.params.task,type:t.type});case 2:case"end":return e.stop()}}),e)})))()},toNextStage:function(){this.task&&!this.isCompiling&&this.task.input&&this.$emit("change-stage")}}},v=r(2),f=Object(v.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-switch",{attrs:{"active-text":"Автоматический ввод","inactive-text":"Ручной ввод"},model:{value:t.autoInput,callback:function(e){t.autoInput=e},expression:"autoInput"}}),t._v(" "),t.autoInput?r("div",[r("div",[t._v("\n      Количество тестов:\n      "),r("el-input-number",{attrs:{min:1,max:100,"controls-position":"right"},model:{value:t.countTests,callback:function(e){t.countTests=e},expression:"countTests"}})],1),t._v("\n    Введите програму\n    "),r("input-program",{attrs:{compiling:t.compiling},on:{"export-program":t.compileInputProgram}})],1):r("div",[t._v("\n    Введите вручную\n    "),r("el-button",{attrs:{type:"primary"},on:{click:t.addInput}},[t._v("\n      Добавить тест\n    ")]),t._v(" "),r("div",{staticClass:"program-input"},t._l(t.input,(function(element,e){return r("div",[r("b-input",{attrs:{placeholder:"Входные параметры",trim:""},model:{value:t.input[e],callback:function(r){t.$set(t.input,e,r)},expression:"input[index]"}}),t._v(" "),r("el-button",{attrs:{type:"danger"},on:{click:function(r){return t.deleteInput(e)}}},[t._v("\n          Удалить тест\n        ")])],1)})),0),t._v(" "),t.input.length>0?r("el-button",{attrs:{type:"primary"},on:{click:t.pushInput}},[t._v("\n      Сохранить\n    ")]):t._e()],1),t._v(" "),t.task?r("div",[t._v("\n    "+t._s(t.task.input)+"\n    "),t.inputLength&&!t.compiling?r("el-button",{attrs:{type:"primary"},on:{click:t.toNextStage}},[t._v("\n      К следующему шагу\n    ")]):t._e()],1):t._e()],1)}),[],!1,null,"1eb2a6a0",null).exports,h={name:"CreateResolve",components:{PrismEditor:c.a,AttempsTable:l.a},data:function(){return{ProgramForm:{programLang:1},programLangSelect:[{value:1,label:"PascalABCNet"},{value:2,label:"Python 3"}],loaded:!1,visibleAttemps:!1,isCompiling:!1,timeout:null,type:"teacher"}},computed:{prismLang:function(){return 1===this.ProgramForm.programLang?"pascal":2===this.ProgramForm.programLang?"python":"pascal"},prismLangSuccessAttemp:function(){return 1===this.solvedAttempOBJ.programLang?"pascal":2===this.solvedAttempOBJ.programLang?"python":void 0},attemps:function(){return this.$store.getters["programming/attemp/attemps"]},solved:function(){return this.$store.getters["programming/task/solved"]},solvedAttemp:function(){return this.$store.getters["programming/task/solvedAttemp"]},solvedAttempOBJ:function(){return this.$store.getters["programming/attemp/solvedAttemp"]},compiling:function(){return this.$store.getters["programming/attemp/attemps"].some((function(t){return"compiling"===t.status||"waiting"===t.status}))}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("mounted"),t.loaded=!0,r=t.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.next=5,t.loadTask();case 5:return e.next=7,t.loadAttemps();case 7:return e.next=9,t.reloadAttemps();case 9:if(!t.solved){e.next=12;break}return e.next=12,t.loadSolvedAttemp();case 12:t.loaded=!0,r.close();case 14:case"end":return e.stop()}}),e)})))()},destroyed:function(){clearTimeout(this.timeout)},methods:{loadSolvedAttemp:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("programming/attemp/loadSolvedAttemp",t.solvedAttemp);case 2:case"end":return e.stop()}}),e)})))()},loadAttemps:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("programming/attemp/loadAttemps",{taskId:t.$route.params.task,type:t.type});case 2:case"end":return e.stop()}}),e)})))()},loadTask:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("programming/task/loadTask",{taskId:t.$route.params.task,type:t.type});case 2:case"end":return e.stop()}}),e)})))()},reloadAttemps:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.attemps.some((function(element){return"waiting"===element.status||"compiling"===element.status}))){e.next=11;break}return e.next=4,t.$store.dispatch("programming/attemp/loadAttemps",{taskId:t.$route.params.task,type:t.type});case 4:if(!t.attemps.some((function(t){return!!t.verdict&&t.verdict.maxPoints===t.verdict.points!==0}))){e.next=10;break}return e.next=7,t.loadTask();case 7:if(!t.solved){e.next=10;break}return e.next=10,t.loadSolvedAttemp();case 10:t.timeout=setTimeout(t.reloadAttemps,1e4);case 11:case"end":return e.stop()}}),e)})))()},toVerdict:function(t){var e=t.row;this.$router.push("/teacherinterface/materials/programming/verdict/".concat(e._id))},statusBar:function(t){var e=t.row;return"waiting"===e.status?"el-icon-document-copy":"compiling"===e.status?"el-icon-loading":e.verdict.compilation?0===e.verdict.maxPoints||e.verdict.errors?"el-icon-remove-outline":"el-icon-circle-check":"el-icon-circle-close"},tableRowClassName:function(t){var e=t.row;return"waiting"===e.status||"compiling"===e.status?"waiting-row":e.verdict?e.verdict.compilation&&0!==e.verdict.maxPoints&&e.verdict.maxPoints===e.verdict.points?"success-row":"error-row":void 0},confirmProgram:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("programming/attemp/addAttemp",{type:"teacher",taskId:t.$route.params.task,program:t.$refs.prismEditorRef.codeData,programLang:t.ProgramForm.programLang});case 2:e.sent.data.success&&t.reloadAttemps();case 4:case"end":return e.stop()}}),e)})))()},toPrevStage:function(){this.isCompiling||this.$emit("change-stage-down")}}},_=(r(1380),{name:"Input",layout:"teacher",middleware:"authTeacher",components:{CreateResolve:Object(v.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.loaded?r("div",[r("el-steps",{attrs:{simple:""}},[r("el-step",{attrs:{title:"Создание тестов",icon:"el-icon-edit",status:"success"}}),t._v(" "),r("el-step",{attrs:{title:"Подтверждение задания",icon:"el-icon-upload",status:"process"}}),t._v(" "),r("el-step",{attrs:{title:"Подтвердить результат",icon:"el-icon-picture"}})],1),t._v(" "),t.solved?r("div",[r("span",[t._v("Решено!")]),t._v(" "),r("div",{staticClass:"solved-attemp"},[r("span",[t._v(" Входные параметры")]),t._v(" "),t._l(t.solvedAttempOBJ.input,(function(input){return r("div",[r("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"Входные параметры",value:input}})],1)})),t._v(" "),r("span",[t._v(" Выходные параметры")]),t._v(" "),t._l(t.solvedAttempOBJ.output,(function(output){return r("div",[r("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"Входные параметры",value:output}}),t._v("\n          />\n        ")],1)})),t._v(" "),r("span",[t._v(" Ограничения по времени")]),t._v(" "),t._l(t.solvedAttempOBJ.time,(function(time,t){return r("div",[r("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"Входные параметры",value:Math.round(1.2*time)}})],1)})),t._v(" "),r("div",{staticClass:"program-resolve"},[r("client-only",[r("prism-editor",{ref:"prismEditorRef",staticClass:"prism-editor-single",attrs:{readonly:"true",code:t.solvedAttempOBJ.program,language:t.prismLangSuccessAttemp,"line-numbers":!0,placeholder:"Решение",autosize:""}})],1)],1)],2)]):r("div",[r("div",[r("span",[t._v("Язык програмирования")]),t._v(" "),r("el-select",{attrs:{placeholder:"Programming language"},model:{value:t.ProgramForm.programLang,callback:function(e){t.$set(t.ProgramForm,"programLang",e)},expression:"ProgramForm.programLang"}},t._l(t.programLangSelect,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),t._v(" "),r("div",{staticClass:"program-resolve"},[r("client-only",[r("prism-editor",{ref:"prismEditorRef",staticClass:"prism-editor-single",attrs:{language:t.prismLang,"line-numbers":!0,placeholder:"Программа",autosize:""}})],1)],1),t._v(" "),r("div",{staticClass:"program-input"},t._l(t.ProgramForm.input,(function(input,e){return r("div",[r("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"Входные параметры"},model:{value:t.ProgramForm.input[e],callback:function(r){t.$set(t.ProgramForm.input,e,r)},expression:"ProgramForm.input[index]"}})],1)})),0),t._v(" "),t.isCompiling?t._e():r("div",{staticClass:"add-input-label"},[t.isCompiling?t._e():r("el-button",{on:{click:function(e){return t.ProgramForm.input.push("")}}},[t._v("\n          Добавить вводимый тест\n        ")])],1),t._v(" "),r("div",[t.isCompiling?t._e():r("el-button",{attrs:{type:"success",loading:t.compiling},on:{click:t.confirmProgram}},[t._v("\n          Подтвердить задание\n        ")])],1)]),t._v(" "),t.isCompiling?t._e():r("el-button",{attrs:{type:"primary"},on:{click:t.toPrevStage}},[t._v("\n      К предыдущему шагу\n    ")]),t._v(" "),r("div",[r("AttempsTable",{attrs:{attemps:t.attemps,page:"/teacherinterface/materials/programming/verdict/"}})],1)],1):r("div",[t._v("\n    Loading...\n  ")])])}),[],!1,null,"37c8eb0b",null).exports,CreateInputPage:f},data:function(){return{currentStage:null,stage:1}},computed:{task:function(){return this.$store.getters["programming/task/task"]}},methods:{secondStage:function(){this.stage=2},firstStage:function(){this.stage=1}}}),k=Object(v.a)(_,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[1===this.stage?e("create-input-page",{on:{"change-stage":this.secondStage}}):this._e(),this._v(" "),2===this.stage?e("create-resolve",{on:{"change-stage-down":this.firstStage}}):this._e()],1)}),[],!1,null,"511faa23",null);e.default=k.exports}}]);