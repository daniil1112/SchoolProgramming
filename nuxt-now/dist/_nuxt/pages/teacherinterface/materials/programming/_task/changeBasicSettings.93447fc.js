(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1328:function(t,e,r){var content=r(1377);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(7).default)("67e5e120",content,!0,{sourceMap:!1})},1329:function(t,e,r){var content=r(1379);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(7).default)("ea50ac0c",content,!0,{sourceMap:!1})},1376:function(t,e,r){"use strict";var n=r(1328);r.n(n).a},1377:function(t,e,r){(e=r(6)(!1)).push([t.i,".font-size-12[data-v-0bca5999]{font-size:12px}",""]),t.exports=e},1378:function(t,e,r){"use strict";var n=r(1329);r.n(n).a},1379:function(t,e,r){(e=r(6)(!1)).push([t.i,'.clearFix[data-v-56fb6328]:after,.clearFix[data-v-56fb6328]:before{display:table;content:""}.clearFix[data-v-56fb6328]:after{clear:both}.md-stepper[data-v-56fb6328]{display:none}',""]),t.exports=e},1412:function(t,e,r){"use strict";r.r(e);r(8);var n=r(3),l={name:"ChangeTitleAndTask",props:["programmingTask"],data:function(){return{title:"",task:"",validate:{title:0,task:0}}},computed:{validationTitleState:function(){return 0===this.validate.title?null:1===this.validate.title},validationTaskState:function(){return 0===this.validate.task?null:1===this.validate.task},invalidFeedbackTitle:function(){return 2===this.validate.title?"Введите название задачи":3===this.validate.title?"Название задачи слишком короткое":4===this.validate.title?"Название задачи слишком длинное":void 0},invalidFeedbackTask:function(){return 2===this.validate.task?"Введите текст задачи":3===this.validate.task?"Текст задачи слишком короткое":4===this.validate.task?"Текст задачи слишком длинное":void 0}},mounted:function(){var t=this.programmingTask,title=t.title,e=t.task;this.title=title,this.task=e,this.validateTitle(),this.validateTask()},methods:{validateTitle:function(){return 0===this.title.length?this.validate.title=2:this.title.length<3?this.validate.title=3:this.title.length>70?this.validate.title=4:this.validate.title=1},validateTask:function(){return 0===this.task.length?this.validate.task=2:this.task.length<10?this.validate.task=3:this.task.length>500?this.validate.task=4:this.validate.task=1},save:function(){var title=this.title,t=this.task;if(this.validateTitle(),this.validateTask(),!this.validationTitleState||!this.validationTaskState)return this.$notify.error({title:"Ошибка данных",message:"Проверьте введенные данные"});this.$emit("save",{title:title,task:t})}}},o=r(2),c=Object(o.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-input-group",{staticClass:"mb-2"},[r("b-input-group-prepend",{attrs:{"is-text":""}},[r("i",{staticClass:"el-icon-edit"})]),t._v(" "),r("b-form-input",{attrs:{type:"text",state:t.validationTitleState,placeholder:"Заголовок",trim:""},on:{blur:t.validateTitle},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),r("b-form-invalid-feedback",{attrs:{state:t.validationTitleState}},[t._v("\n            "+t._s(t.invalidFeedbackTitle)+"!\n        ")])],1),t._v(" "),t.validationTitleState||null===t.validationTitleState?r("b-form-text",[t._v("\n        Заголовок должен быть от 3 до 70 символов\n    ")]):t._e(),t._v(" "),r("b-input-group",{staticClass:"mb-2"},[r("b-input-group-prepend",{attrs:{"is-text":""}},[r("i",{staticClass:"el-icon-edit"})]),t._v(" "),r("b-form-input",{attrs:{type:"text",state:t.validationTaskState,placeholder:"Задание",trim:""},on:{blur:t.validateTask},model:{value:t.task,callback:function(e){t.task=e},expression:"task"}}),t._v(" "),r("b-form-invalid-feedback",{attrs:{state:t.validationTaskState}},[t._v("\n            "+t._s(t.invalidFeedbackTask)+"!\n        ")])],1),t._v(" "),t.validationTaskState||null===t.validationTaskState?r("b-form-text",[t._v("\n        Текст задания должен быть от 10 до 500 символов\n    ")]):t._e(),t._v(" "),r("b-button",{attrs:{variant:"success",disabled:t.title===t.programmingTask.title&&t.task===t.programmingTask.task},on:{click:t.save}},[t._v("Сохранить")]),t._v(" "),r("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.$emit("next-stage")}}},[t._v("\n        К следующему шагу\n    ")])],1)}),[],!1,null,"7b48a5b6",null).exports,d={name:"Examples",props:["programmingTask"],data:function(){return{currentInput:"",currentOutput:"",examples:[]}},mounted:function(){this.examples=Object.assign([],this.programmingTask.samples)},methods:{addExample:function(){var t=this.examples,e=this.currentInput,r=this.currentOutput;return 0===e.length?this.$notify.error({title:"Ошибка",message:"Ввод не может быть пустым"}):0===r.length?this.$notify.error({title:"Ошибка",message:"Вывод не может быть пустым"}):t.some((function(t){return t.input===e}))?this.$notify.error({title:"Ошибка",message:"Дублирующийся ввод"}):(this.examples.push({input:this.currentInput,output:this.currentOutput}),this.currentInput="",void(this.currentOutput=""))},save:function(){var t=this.examples;if(0===t.length)return this.$notify.error({title:"Ошибка",message:"Введите хотя-бы один пример"});this.$emit("save",{examples:t})}}},m=(r(1376),{name:"changeBasicSettings",layout:"teacher",middleware:"authTeacher",components:{ChangeExamples:Object(o.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}]},[t._v("\n        Добавить пример\n    ")]),t._v(" "),r("b-button",{attrs:{variant:"success",disabled:0===t.examples.length||JSON.stringify(t.examples)===JSON.stringify(t.programmingTask.samples)},on:{click:t.save}},[t._v("\n        Сохранить\n    ")]),t._v(" "),r("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.$emit("back")}}},[t._v("\n        К предыдущему шагу\n    ")]),t._v(" "),r("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.$emit("to-task-view")}}},[t._v("\n        К просмотру задания\n    ")]),t._v(" "),r("b-modal",{attrs:{id:"modal-1",size:"xl",centered:""},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[r("div",{staticClass:"w-100"},[r("b-button",{attrs:{variant:"success"},on:{click:t.addExample}},[t._v("\n                    Добавить пример\n                ")])],1)]},proxy:!0}])},[r("b-row",[r("b-col",{attrs:{sm:"6"}},[r("b-form-textarea",{staticClass:"font-size-12",attrs:{id:"textarea-default",placeholder:"Ввод",trim:""},model:{value:t.currentInput,callback:function(e){t.currentInput=e},expression:"currentInput"}})],1),t._v(" "),r("b-col",{attrs:{sm:"6"}},[r("b-form-textarea",{staticClass:"font-size-12",attrs:{id:"textarea-default",placeholder:"Вывод",trim:""},model:{value:t.currentOutput,callback:function(e){t.currentOutput=e},expression:"currentOutput"}})],1)],1)],1),t._v(" "),r("b-row",{staticClass:"mt-2"},[r("b-col",{attrs:{sm:"6"}},[r("label",[t._v("Пример ввода:")])]),t._v(" "),r("b-col",{attrs:{sm:"6"}},[r("label",[t._v("Пример вывода:")])]),t._v(" "),t._l(t.examples,(function(e){return r("b-col",{attrs:{sm:"12"}},[r("b-row",[r("b-col",{attrs:{sm:"6"}},[r("b-form-textarea",{staticClass:"font-size-12",attrs:{id:"textarea-default",placeholder:"Default textarea",readonly:!0},model:{value:e.input,callback:function(r){t.$set(e,"input",r)},expression:"example.input"}})],1),t._v(" "),r("b-col",{attrs:{sm:"6"}},[r("b-form-textarea",{staticClass:"font-size-12",attrs:{id:"textarea-default",placeholder:"Default textarea",readonly:!0},model:{value:e.output,callback:function(r){t.$set(e,"output",r)},expression:"example.output"}})],1)],1)],1)}))],2)],1)}),[],!1,null,"0bca5999",null).exports,ChangeTitleAndTask:c},validate:function(t){var e=t.params;return/^\d+$/.test(e.task)},data:function(){return{step:1,secondStep:{examples:[]}}},computed:{task:function(){return this.$store.getters["teacher/programming/task/task"](this.$route.params.task)}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadTask();case 2:case"end":return e.stop()}}),e)})))()},methods:{loadTask:function(){var t=arguments,e=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]&&t[0],r.next=3,e.$store.dispatch("teacher/programming/task/loadTask",{taskId:e.$route.params.task,force:n});case 3:case"end":return r.stop()}}),r)})))()},uptadeTitleAndTask:function(data){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var title,r,n,l,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return title=data.title,r=data.task,e.next=3,t.$store.dispatch("teacher/programming/task/updateTitleAndTask",{taskId:t.task._id,title:title,task:r});case 3:if(n=e.sent,l=n.error,o=n.errorMessage,!l||!o){e.next=10;break}return e.abrupt("return",t.$notify.error({title:"Ошибка при изменении",message:o}));case 10:return e.next=12,t.loadTask(!0);case 12:return e.abrupt("return",t.$notify.success({title:"Успех",message:"Заголовок и текст задания успешно изменеы"}));case 13:case"end":return e.stop()}}),e)})))()},updateExamples:function(data){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,l,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=data.examples,e.next=3,t.$store.dispatch("teacher/programming/task/updateExamples",{taskId:t.task._id,examples:r});case 3:if(n=e.sent,l=n.error,o=n.errorMessage,!l||!o){e.next=10;break}return e.abrupt("return",t.$notify.error({title:"Ошибка при изменении",message:o}));case 10:return e.next=12,t.loadTask(!0);case 12:return e.abrupt("return",t.$notify.success({title:"Успех",message:"Заголовок и текст задания успешно изменеы"}));case 13:case"end":return e.stop()}}),e)})))()},saveFirstStage:function(data){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n,code;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.secondStep={examples:data.examples},e.next=3,t.$axios.post("api/teacher/programming/newTask",{title:t.firstStep.title,task:t.firstStep.task,examples:t.secondStep.examples});case 3:if(r=e.sent.data,n=r.id,!(code=r.code)){e.next=19;break}e.t0=code,e.next=1===e.t0?10:2===e.t0?13:16;break;case 10:return t.$notify.error({title:"Ошибка при создании",message:"Ошибка в заголовке или задании!"}),t.step=1,e.abrupt("break",17);case 13:return t.$notify.error({title:"Ошибка при создании",message:"Ошибка в примерах ввода\\вывода!"}),t.step=2,e.abrupt("break",17);case 16:return e.abrupt("break",17);case 17:e.next=20;break;case 19:n&&(t.$notify.success({title:"Успех",message:"Задание создано!"}),t.$router.push("/teacherinterface/materials/programming/".concat(n,"/view")));case 20:case"end":return e.stop()}}),e)})))()}}}),v=(r(1378),Object(o.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-card",[r("div",{staticClass:"clearFix",attrs:{slot:"header"},slot:"header"},[r("md-steppers",{attrs:{"md-active-step":t.step,"md-linear":""},on:{"update:mdActiveStep":function(e){t.step=e},"update:md-active-step":function(e){t.step=e}}},[r("md-step",{attrs:{id:"first","md-label":"Заголовок и задание","md-editable":!1,"md-done":!0}}),t._v(" "),r("md-step",{attrs:{id:"second","md-label":"Примеры ввода/вывода","md-editable":!1,"md-done":!0}})],1)],1),t._v(" "),1===t.step&&t.task?r("ChangeTitleAndTask",{attrs:{programmingTask:t.task},on:{save:t.uptadeTitleAndTask,"next-stage":function(e){t.step=2}}}):t._e(),t._v(" "),2===t.step&&t.task?r("ChangeExamples",{attrs:{programmingTask:t.task},on:{save:t.updateExamples,back:function(e){t.step=1},"to-task-view":function(e){return t.$router.push("/teacherinterface/materials/programming/"+t.task._id+"/view")}}}):t._e()],1)}),[],!1,null,"56fb6328",null));e.default=v.exports}}]);