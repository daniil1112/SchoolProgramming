(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{1418:function(e,t,n){"use strict";n.r(t);n(8);var r=n(3),o={name:"Create",layout:"teacher",middleware:"authTeacher",data:function(){return{page:1,tests:[],chosen:[],title:null}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("https://server-now.moiplansh028.now.sh/api/teacher/tests/allTests",{page:e.page});case 2:(n=t.sent).data.tests&&(e.tests=n.data.tests);case 4:case"end":return t.stop()}}),t)})))()},methods:{addTest:function(e){var t=e.row;this.chosen.push(t._id)},removeTest:function(e){var t=e.row;this.chosen=this.chosen.filter((function(element){return element!==t._id}))},check:function(e){var t=e.row;return this.chosen.some((function(element){return element===t._id}))},save:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.title){t.next=4;break}e.$notify.error({title:"Ошибка",text:"Заголовок не может быть пустым",showClose:!0}),t.next=13;break;case 4:if(!(e.chosen.length<0)){t.next=8;break}e.$notify.error({title:"Ошибка",text:"Не выбраны тесты",showClose:!0}),t.next=13;break;case 8:return t.next=10,e.$axios.post("https://server-now.moiplansh028.now.sh/api/teacher/tests/createblock",{title:e.title,tests:e.chosen});case 10:n=t.sent,console.log(n.data),n.data.result&&e.$notify.success({title:"Успех",text:"Блок тестов успешно создан",showClose:!0});case 13:case"end":return t.stop()}}),t)})))()}}},c=n(2),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-card",{attrs:{shadow:"always"}},[n("el-input",{attrs:{placeholder:"Заголовок"},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}}),e._v(" "),e.tests?n("el-table",{attrs:{data:e.tests}},[n("el-table-column",{attrs:{label:"Id",prop:"_id"}}),e._v(" "),n("el-table-column",{attrs:{label:"Заголовок",prop:"title"}}),e._v(" "),n("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[e.check(t)?n("el-button",{on:{click:function(n){return e.removeTest(t)}}},[e._v("\n          Убрать тест\n        ")]):n("el-button",{on:{click:function(n){return e.addTest(t)}}},[e._v("\n          Добавить тест\n        ")])]}}],null,!1,1007241108)})],1):e._e(),e._v(" "),e.chosen.length>0?n("el-button",{on:{click:e.save}},[e._v("\n    Сохранить блок\n  ")]):e._e()],1)}),[],!1,null,"273e3e24",null);t.default=component.exports}}]);